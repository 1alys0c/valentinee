<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Valentine's Special Quest ‚ù§Ô∏è</title>
<link href="https://fonts.googleapis.com" rel="stylesheet">
<style>
/* Perubahan warna ke Biru Muda di sini */
:root { --pink: #4dabff; --light-pink: #d6ebff; }
body {
    margin: 0; height: 100vh; display: flex; justify-content: center; align-items: center;
    background: radial-gradient(circle, #f0f8ff 0%, #d6ebff 100%);
    font-family: 'Poppins', sans-serif; overflow: hidden;
}

/* Background Animation */
.floating-elements { position: absolute; top:0; left:0; width:100%; height:100%; pointer-events: none; z-index: 1; }

.container {
    text-align: center; background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px); padding: 30px; border-radius: 30px;
    box-shadow: 0 20px 50px rgba(77, 171, 255, 0.2);
    z-index: 10; width: 90%; max-width: 420px; border: 2px solid white;
    transition: all 0.5s ease;
}

h1 { color: var(--pink); font-size: 1.6rem; min-height: 60px; line-height: 1.4; }
.gif-container img { width: 180px; border-radius: 20px; margin-bottom: 10px; animation: pulse 2s infinite; }
@keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }

/* Buttons */
.buttons { margin-top: 20px; display: flex; gap: 15px; justify-content: center; }
button {
    padding: 12px 30px; font-size: 1rem; font-weight: bold;
    border: none; border-radius: 15px; cursor: pointer; transition: 0.3s;
}
#yesBtn { background: var(--pink); color: white; box-shadow: 0 5px 15px rgba(77, 171, 255, 0.3); }
#noBtn { background: #b3dbff; color: white; position: relative; }

/* Stage Controls */
.stage { display: none; }
.active { display: block; animation: fadeIn 0.5s ease; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

/* Game Elements */
.target-heart {
    position: fixed; cursor: pointer; font-size: 45px; z-index: 100;
    filter: drop-shadow(0 5px 10px rgba(0,0,0,0.1));
    transition: transform 0.1s; animation: wobble 0.6s infinite alternate;
}
@keyframes wobble { from { transform: rotate(-15deg); } to { transform: rotate(15deg); } }

/* Secret Letter */
.letter-box {
    background: #fff; padding: 20px; border-radius: 15px;
    border: 2px dashed var(--pink); font-family: 'Dancing Script', cursive;
    font-size: 1.3rem; color: #444; line-height: 1.6; text-align: left;
}

input[type="text"] {
    width: 80%; padding: 10px; margin: 15px 0; border-radius: 10px;
    border: 2px solid var(--light-pink); outline: none; text-align: center;
}

/* Animations */
.heart-float { position: absolute; pointer-events: none; animation: floatUp 4s linear forwards; }
@keyframes floatUp { to { transform: translateY(-100vh) rotate(360deg); opacity: 0; } }
</style>
</head>
<body>

<div class="floating-elements" id="bgLayer"></div>

<div class="container" id="mainCard">
    <!-- STAGE 1: THE ASKING -->
    <div id="stage1" class="stage active">
        <div class="gif-container">
            <img src="https://giphy.com/gifs/cat-kitty-bleh-vPzbDN4rBxuvtpSpzF"="150">
        </div>
        <h1 id="typewriter"></h1>
        <div class="buttons">
            <button id="yesBtn">YES!</button>
            <button id="noBtn" onmouseover="noEscape()">NO</button>
        </div>
    </div>

    <!-- STAGE 2: THE GAME -->
    <div id="stage2" class="stage">
        <h2 style="color: var(--pink)">Catch the Hearts! ‚ù§Ô∏è</h2>
        <p>Tangkap 10 hati untuk membuka kejutan!</p>
        <div style="font-size: 2rem; font-weight: bold; color: var(--pink)" id="scoreTxt">0 / 10</div>
        <div class="gif-container">
            <img src="https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif" width="150">
        </div>
    </div>

    <!-- STAGE 3: THE PASSWORD -->
    <div id="stage3" class="stage">
        <h2 style="color: var(--pink)">Satu langkah lagi... üîí</h2>
        <p>Siapa nama panggilan kesayangan kamu?</p>
        <input type="text" id="passInput" placeholder="Ketik di sini...">
        <br>
        <button id="unlockBtn" style="background: var(--pink); color: white;">Buka Surat Cinta</button>
    </div>

    <!-- STAGE 4: THE FINAL LETTER -->
    <div id="stage4" class="stage">
        <div class="letter-box">
            "Dear Favorite Person, <br><br>
            Makasih ya udah mau mainin game kecil ini. <br>
            Cuma mau bilang, kamu berharga banget buat aku. Happy Valentine's Day! <br><br>
            With Love, <br>
            -awul"
        </div>
        <br>
        <img src="https://media.giphy.com/media/26BRv0ThflsHCqDrG/giphy.gif" width="150">
    </div>
</div>

<!-- Ganti link audio Anda dengan ini untuk tes -->
<audio id="bgMusic" loop src="reality_club.mp3"></audio>


<script>
const bgMusic = document.getElementById('bgMusic');
let score = 0;

// 1. Typewriter Effect
const txt = "Do you still love me after all this time?? ";
let i = 0;
function typing() {
    if (i < txt.length) {
        document.getElementById("typewriter").innerHTML += txt.charAt(i);
        i++; setTimeout(typing, 80);
    }
}
typing();

// 2. No Button Escape
function noEscape() {
    const btn = document.getElementById('noBtn');
    btn.style.position = 'fixed';
    btn.style.left = Math.random() * (window.innerWidth - 100) + 'px';
    btn.style.top = Math.random() * (window.innerHeight - 50) + 'px';
    btn.innerHTML = ["Yakin?", "Nggak bisa!", "Pikir lagi üòú", "Eits!","harus mauu!üò°","wlee","serius??üò¢","yesüòù","ohüò± yessüòèü§§"][Math.floor(Math.random()*10)];
}

// 3. Switch to Game
document.getElementById('yesBtn').onclick = () => {
    try { bgMusic.play(); } catch(e) {} // Start music
    showStage(2);
    spawnHeart();
};

function showStage(num) {
    document.querySelectorAll('.stage').forEach(s => s.classList.remove('active'));
    document.getElementById('stage' + num).classList.add('active');
}

// 4. Mini Game Logic
function spawnHeart() {
    if (score >= 10) { showStage(3); return; }
    const h = document.createElement('div');
    h.className = 'target-heart';
    h.innerHTML = '‚ù§Ô∏è';
    h.style.left = Math.random() * (window.innerWidth - 60) + 'px';
    h.style.top = Math.random() * (window.innerHeight - 60) + 'px';
    h.onclick = () => {
        score++;
        document.getElementById('scoreTxt').innerText = score + " / 10";
        h.remove();
        createParticles(h.style.left, h.style.top);
        spawnHeart();
    };
    document.body.appendChild(h);
}

// 5. Password Logic
document.getElementById('unlockBtn').onclick = () => {
    const pass = document.getElementById('passInput').value;
    if (pass.length > 2) { // Minimal 3 karakter
        showStage(4);
        setInterval(rainHearts, 200);
    } else {
        alert("awul");
    }
};

function createParticles(x, y) {
    for(let i=0; i<5; i++) {
        const p = document.createElement('div');
        p.className = 'heart-float';
        p.innerHTML = '‚ú®';
        p.style.left = x; p.style.top = y;
        document.body.appendChild(p);
        setTimeout(() => p.remove(), 1000);
    }
}

function rainHearts() {
    const h = document.createElement('div');
    h.className = 'heart-float';
    h.innerHTML = ['üíô','üíé','‚ùÑÔ∏è','‚òÅÔ∏è'][Math.floor(Math.random()*4)];
    h.style.left = Math.random() * 100 + 'vw';
    h.style.top = '100vh';
    h.style.fontSize = Math.random() * 20 + 20 + 'px';
    document.body.appendChild(h);
    setTimeout(() => h.remove(), 4000);
}
</script>
</body>
</html>
